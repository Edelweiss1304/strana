Strana E2E Autotests

Документ будет постоянно обновляться и дополняться.

1."base".

base_class.py:

def open_page() - метод для открытия url

Пример: Base.open_page(driver, URLS_MAIN['url_tmn'])

get_element_visibility() - получение элемента по видимости на странице. Если не найдет первый раз, ищет еще, чтобы избежать StaleElementReferenceExeption.
get_element_clickable() - аналогично, но по доступности для клика.

Пример применения:
    def get_wow(self):
        return self.get_element_clickable(self.driver, (By.XPATH, self.wow))

get_s_link_wrapper_locator() - получение пунктов меню. Все они s_link_wrapper, только с разными порядковыми номерами, поэтому написал 1 функцию для всех.
Пример:
        locator = Base.get_s_link_wrapper_locator(8)
        Base.get_element_clickable(self.driver, (By.XPATH, locator)).click()

2. Папка "pages"

В папке "pages" можно найти локаторы(#Locators), Геттеры(#Getters), Действия(#Actions),Методы(#Methods)

#Locators - Нужны для хранения локатора элемента на веб-странице. Если вдруг локатор меняется, то его нужно будет поменять только в этом месте.
#Getters - Туда подставляется локатор, чтобы с помощью селениума можно было получить веб-элемент.
#Actions - Различные одинарные действия на странице, с использованием вышеупомянутых геттеров.
#Methods - Набор из нескольких действий. Потом из этих методов составляются сами тесты.

authorization.py - Все, что связано с авторизацией ЛК брокера и ЛК клиента
header_links.py - Все, что связано с хедэром
project_page.py - Страница проектов
url.py - url'ы всех страниц, которые нужны для тестов, вызываемые в методе def open_page()

3. Папка "tests"

3.1 Coftest.py:
def driver() - Экземпляр драйвера со всеми опциями.
pytest_collection_modifyitems() - добавляет маркер pytest.mark.flaky соответствующим образом для всех тестовых элементов

3.2 Тесты:
test_apart_from_header.py - Проверка квартир по комнатности (заходим на сайт, кликаем однокомнатные, смотрим что попали в нужный город и в фильтре стоят однокомнатные).
test_header_links.py - Проверка всех кнопок в хэдере (заходим на сайт, кликаем на кнопку, проверяем что попали на нужную страницу).
test_header_menu.py - Отдельно вынес тест для бургера (аналогично тому, что выше).
test_login_broker.py - Тест авторизации в ЛК брокера.
test_login_lk.py - Тест авторизации ЛК клиента.
test_projects.py - Тест проектов через страницу проектов (заходим на сайт, кликаем на проекты, выбираем проект и смотрим что попали на нужный).
test_projects_from_header.py - Аналогично тому, что выше, только через выпадающее меню хэдера.